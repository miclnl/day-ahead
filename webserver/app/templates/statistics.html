{% extends "base.html" %} {% block selectie %}{% endblock %} {% block content %}
<div class="statistics-container">
  <div class="statistics-header">
    <h1>üìä Statistieken & Trends</h1>
    <p>Analyse van historische data en optimalisatie prestaties</p>
  </div>

  {% if recommendations %}
  <div class="statistics-section">
    <h2>üéØ Optimalisatie Aanbevelingen</h2>
    <div class="recommendations-grid">
      {% if recommendations.battery_charging %}
      <div class="recommendation-card">
        <h3>üîã Batterij Laden</h3>
        <div class="recommendation-content">
          <p>
            <strong>Aanbevolen uren:</strong> {{
            recommendations.battery_charging.recommended_hours|join(', ') }}
          </p>
          <p>
            <strong>Reden:</strong> {{ recommendations.battery_charging.reason
            }}
          </p>
          <p>
            <strong>Verwachte besparing:</strong> ‚Ç¨{{
            "%.2f"|format(recommendations.battery_charging.expected_savings) }}
          </p>
          <p>
            <strong>Betrouwbaarheid:</strong> {{
            "%.0f"|format(recommendations.battery_charging.confidence * 100) }}%
          </p>
        </div>
      </div>
      {% endif %} {% if recommendations.peak_avoidance %}
      <div class="recommendation-card">
        <h3>‚ö° Piek Vermijding</h3>
        <div class="recommendation-content">
          <p>
            <strong>Kritieke uren:</strong> {{
            recommendations.peak_avoidance.critical_hours|join(', ') }}
          </p>
          <p>
            <strong>Reden:</strong> {{ recommendations.peak_avoidance.reason }}
          </p>
          <p>
            <strong>Batterij ontladen:</strong> {{ "Ja" if
            recommendations.peak_avoidance.battery_discharge else "Nee" }}
          </p>
          <p>
            <strong>Verwachte besparing:</strong> ‚Ç¨{{
            "%.2f"|format(recommendations.peak_avoidance.expected_savings) }}
          </p>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
  {% endif %} {% if historical_accuracy %}
  <div class="statistics-section">
    <h2>üìà Historische Prestaties</h2>
    <div class="accuracy-grid">
      <div class="accuracy-card">
        <h3>Week Prestaties</h3>
        <div class="accuracy-content">
          <p>
            <strong>Voorspellingsnauwkeurigheid:</strong> {{
            "%.1f"|format(historical_accuracy.week_accuracy * 100) }}%
          </p>
          <p>
            <strong>Kostenbesparing:</strong> ‚Ç¨{{
            "%.2f"|format(historical_accuracy.week_savings) }}
          </p>
          <p>
            <strong>Status:</strong>
            <span class="status-{{ historical_accuracy.week_status.lower() }}">
              {{ historical_accuracy.week_status }}
            </span>
          </p>
        </div>
      </div>

      <div class="accuracy-card">
        <h3>Maand Prestaties</h3>
        <div class="accuracy-content">
          <p>
            <strong>Voorspellingsnauwkeurigheid:</strong> {{
            "%.1f"|format(historical_accuracy.monthly_accuracy * 100) }}%
          </p>
          <p>
            <strong>Kostenbesparing:</strong> ‚Ç¨{{
            "%.2f"|format(historical_accuracy.monthly_savings) }}
          </p>
          <p>
            <strong>Status:</strong>
            <span
              class="status-{{ historical_accuracy.monthly_status.lower() }}"
            >
              {{ historical_accuracy.monthly_status }}
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>
  {% endif %} {% if current_status %}
  <div class="statistics-section">
    <h2>üîç Huidige Systeem Status</h2>
    <div class="status-grid">
      <div class="status-card">
        <h3>‚ö° Energie Balans</h3>
        <div class="status-content">
          <p>
            <strong>Netto verbruik:</strong> {{
            "%.2f"|format(current_status.net_consumption) }} kWh
          </p>
          <p>
            <strong>Zonneproductie:</strong> {{
            "%.2f"|format(current_status.solar_production) }} kWh
          </p>
          <p>
            <strong>Batterij SoC:</strong> {{
            "%.1f"|format(current_status.battery_soc) }}%
          </p>
        </div>
      </div>

      <div class="status-card">
        <h3>üí∞ Kosten Analyse</h3>
        <div class="status-content">
          <p>
            <strong>Dagelijkse kosten:</strong> ‚Ç¨{{
            "%.2f"|format(current_status.daily_cost) }}
          </p>
          <p>
            <strong>Verwachte besparing:</strong> ‚Ç¨{{
            "%.2f"|format(current_status.estimated_savings) }}
          </p>
          <p>
            <strong>Besparingspercentage:</strong> {{
            "%.1f"|format(current_status.savings_percentage) }}%
          </p>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  <div class="statistics-footer">
    <p><em>Laatste update: {{ now().strftime('%d-%m-%Y %H:%M') }}</em></p>
  </div>
</div>

<style>
  .statistics-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }

  .statistics-header {
    text-align: center;
    margin-bottom: 40px;
    padding: 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 12px;
  }

  .statistics-header h1 {
    margin: 0 0 10px 0;
    font-size: 2.5em;
  }

  .statistics-header p {
    margin: 0;
    font-size: 1.2em;
    opacity: 0.9;
  }

  .statistics-section {
    margin-bottom: 40px;
  }

  .statistics-section h2 {
    color: #333;
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 10px;
    margin-bottom: 25px;
  }

  .recommendations-grid,
  .accuracy-grid,
  .status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 25px;
  }

  .recommendation-card,
  .accuracy-card,
  .status-card {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-left: 4px solid #667eea;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .recommendation-card:hover,
  .accuracy-card:hover,
  .status-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  }

  .recommendation-card h3,
  .accuracy-card h3,
  .status-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
  }

  .recommendation-content p,
  .accuracy-content p,
  .status-content p {
    margin: 8px 0;
    color: #555;
  }

  .recommendation-content strong,
  .accuracy-content strong,
  .status-content strong {
    color: #333;
  }

  .status-excellent {
    color: #28a745;
    font-weight: bold;
  }

  .status-good {
    color: #17a2b8;
    font-weight: bold;
  }

  .status-average {
    color: #ffc107;
    font-weight: bold;
  }

  .status-poor {
    color: #dc3545;
    font-weight: bold;
  }

  .statistics-footer {
    text-align: center;
    margin-top: 40px;
    padding: 20px;
    color: #666;
    border-top: 1px solid #e9ecef;
  }

  @media (max-width: 768px) {
    .statistics-container {
      padding: 15px;
    }

    .statistics-header {
      padding: 20px;
    }

    .statistics-header h1 {
      font-size: 2em;
    }

    .recommendations-grid,
    .accuracy-grid,
    .status-grid {
      grid-template-columns: 1fr;
      gap: 20px;
    }

    .recommendation-card,
    .accuracy-card,
    .status-card {
      padding: 20px;
    }
  }
</style>
{% endblock %}
